{% extends 'base.html.twig' %}

{% block head %}
    <!-- Morris chart -->
    <link rel="stylesheet" href="{{ asset('bower_components/morris.js/morris.css') }}">
{% endblock %}

{% block content %}
    <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        Überblick
        <small>Überblick</small>
      </h1>
      <!-- <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">Dashboard</li>
      </ol> -->
    </section>

    <!-- Main content -->
    <section class="content">
      <!-- Small boxes (Stat box) -->
      <div class="row">
        {% for row in rowsB %}
        <div class="col-lg-3 col-xs-6">
          <div class="small-box {{CssArray[loop.index % 5]}}">
            <div class="inner">
              <h3>{{ row.count_makler_on_regional_office|e }}</h3>
              <h5>Mitglieder <b>{{ row.name|e }}</b></h5>
              <p>davon haben <b>{{ row.percent|e }}%</b> aktive Objekte eingestellt</p>
            </div>
            <div class="icon">
              <i class="ion ion-stats-bars"></i>
            </div>
            <a href="#" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>
          </div>
        </div>
        {% endfor %}
      </div>
      <!-- /.row -->
      <!-- Main row -->
      <div class="row">
        <!-- Left col -->
        <section class="col-lg-6">
          <!-- Custom tabs (Charts with tabs)-->
          <div class="nav-tabs-custom nav-info">
            <!-- Tabs within a box -->
            <ul class="nav nav-tabs pull-right">
              <li class="active"><a href="#revenue-chart" data-toggle="tab">Area</a></li>
              <li><a href="#sales-chart" data-toggle="tab">Donut</a></li>
              <li class="pull-left header"><i class="fa fa-inbox"></i>Objektbestand</li>
            </ul>
            
            <div class="tab-content">
              <!-- Morris chart - Sales -->
              <div class="chart tab-pane active" id="revenue-chart" style="position: relative; height: 300px;"></div>
              <div class="chart tab-pane" id="sales-chart" style="position: relative; height: 300px;"></div>
            </div>
          </div>
          <!-- /.nav-tabs-custom -->
        </section>
        <!-- /.Left col -->
        <!-- right col (We are only adding the ID to make the widgets sortable)-->
        <section class="col-lg-6">
          <div class="box box-info">
            <div class="box-header with-border">
              <i class="fa fa-inbox"></i><h3 class="box-title">Anzahl der Anfragen</h3>
              {# <div class="box-tools pull-right">
                <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
                <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
              </div> #}
            </div>

            <div class="box-body chart-responsive">
              <div class="chart" id="line-chart" style="height: 300px;"></div>
            </div>
          </div>
        </section>
        <!-- right col -->
      </div>
      <!-- /.row (main row) -->

      <!-- Makler row -->
      <div class="row">
        <section class="col-lg-6">
          {% if geschaeftsstelle_id != 6 %}
            <br>
            {# <a class="excel" target="_blank" onclick="if(confirm('CSV Daten jetzt laden?')) location.href='/statistic/csv/activmakler/{{geschaeftsstelle_id}}';"><b>Aktiv-Makler-List-CSV runterladen</b></a> #}
            <a href="/statistic/csv/activmakler/{{geschaeftsstelle_id}}"><b>Aktiv-Makler-List-CSV runterladen</b></a>
            <br>
            {# <a class="excel" target="_blank" onclick="if(confirm('CSV Daten jetzt laden?')) location.href='/statistic/csv/inactivmakler/{{geschaeftsstelle_id}}';"><b>In-Aktiv-Makler-List-CSV runterladen</b></a> #}
            <a href="/statistic/csv/inactivmakler/{{geschaeftsstelle_id}}"><b>In-Aktiv-Makler-List-CSV runterladen</b></a>
          {% endif %}
        </section>

        {# <section class="col-lg-12 connectedSortable">
          <div class="box box-info">
            <!-- Content Header (Page header) -->
            <div class="box-header">
                <h3>ivd24 Makler <small>Makler bearbeiten</small></h3>
            </div>
            
            <div class="box-body">
                <table id="example1" class="table table-bordered table-striped display" width="100%">
                    <thead>
                        <tr>
                            <th style='width: 8%;'>User-ID</th>
                            <th style='width: 16%;'>Vorname, Name</th>
                            <th style='width: 20%;'>Firma</th>
                            <th style='width: 20%;'>E-Mail</th>
                            <th style='width: 10%;'>Reg-Datum</th>
                            <th style='width: 10%;'>Last Login</th>
                            <th style='width: 16%;'>&nbsp;</th>
                        </tr>
                      </thead>
                </table>     
            </div>
          </div>
        </section> #}
      </div>
      <!-- Makler row End-->

    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->
{% endblock %}

{% block zusatz %}
    <!-- Morris.js charts -->
    <script src="{{ asset('bower_components/raphael/raphael.min.js') }}"></script>
    <script src="{{ asset('bower_components/morris.js/morris.min.js') }}"></script>

    <script>

  // DONUT CHART
  var donut = new Morris.Donut({
    element  : 'sales-chart',
    resize   : true,
    colors   : ['#3c8dbc', '#f56954', '#00a65a'],
    data     : {{donutData|json_encode|raw}},
    hideHover: 'auto'
  });

  // AREA CHART
  var area = new Morris.Area({
    element: 'revenue-chart',
    resize: true,
    data: {{areaData|json_encode|raw}},
    xkey: 'day',
    ykeys: ['nfrei', 'frei', 'gesamt'],
    labels: ['nicht freigegeben Objekte', 'freigegeben Objekte', 'Objekte gesamt'],
    //lineColors: ['#9a32a8', '#a86b32', '#3c8dbc'],
    lineColors: ['#00a65a', '#f56954', '#3c8dbc'],
    hideHover: 'auto'
  });

  // LINE CHART
  var line = new Morris.Line({
    element          : 'line-chart',
    resize           : true,
    data             : {{lineData|json_encode|raw}},
    xkey             : 'day',
    ykeys            : ['ivdSud', 'gesamt'],
    labels           : ['Ivd Süd', 'Gesamt'],
    lineColors       : ['#f56954', '#3c8dbc'],
    lineWidth        : 2,
    hideHover        : 'auto',
    //gridTextColor    : '#fff',
    //gridStrokeWidth  : 0.4,
    //pointSize        : 4,
    //pointStrokeColors: ['#efefef'],
    //gridLineColor    : '#efefef',
    //gridTextFamily   : 'Open Sans',
    //gridTextSize     : 10
  });

</script>
{% endblock %}

