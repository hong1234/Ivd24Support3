{% extends 'baseMaklerList.html.twig' %}

{% block title %}Makler Overview{% endblock %}

{% block content %}
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <section class="content-header">
            <h1>Makler bearbeiten</h1>
        </section>
        <!-- Main content -->
        <section class="content">
            <div class="row">
                <div class="col-xs-12">
                    <div class="box">
                        <div class="box-header">
                            <h3 class="box-title">Ãœbersicht</h3>
                            <div id="moredata"></div>
                        </div>
                        <!-- /.box-header -->
                        <div class="box-body">
                            <table id="example1" class="table table-bordered table-striped display" style="width: 100%;" role="grid" aria-describedby="example_info">
                                <thead>
                                    <tr>
                                        <th style='width: 10%;'>User-ID</th>
                                        <th style='width: 10%;'>Mitglied-Nr</th>
                                        <th style='width: 14%;'>Vorname, Name</th>
                                        <th style='width: 14%;'>Firma</th>
                                        <th style='width: 14%;'>E-Mail</th>
                                        <th style='width: 10%;'>Reg-Datum</th>
                                        <th style='width: 10%;'>Last-Login</th>
                                        <th style='width: 18%;'>&nbsp;</th>
                                    </tr>
                                </thead>
                            </table>   
                        </div>
                    </div>
                </div>
            </div>
        </section>
  </div>
  <!-- /.content-wrapper -->
{% endblock %}

{% block footer %}
    {{ parent() }}

    <script>
        {# $(document).ready(function() {
            var myElemente = document.getElementsByClassName("into_delete-list");
            for(var i = 0; i < myElemente.length; i++) {
                myElemente[i].addEventListener("click", function(event){
                    var answer = window.confirm("Wollen Sie den Makler wirklich in Del-List schieben?");
                    if (answer) {
                        //some code
                    }
                    else {
                        //some code
                        event.preventDefault();
                    } 
                });
            }  
        }); #}

        {# $(document).ready(function() {
            var myElemente = document.getElementsByClassName("sorting_1");
            for(var i = 0; i < myElemente.length; i++) {
                myElemente[i].addEventListener("click", function(event){
                    alert("Bitte geben Sie PLZ-Angabe zuerst");
                });
            }  
        }); #}

        var focusElem;

        function moreInfo(elem, param) {
            //console.log(elem.parentElement.parentElement);
            //var newElem = document.createElement ("tr");
            //newElem.innerHTML = "sample text";
            //newElem.style.color = "red";

            //elem.parentElement.parentElement.appendChild( newElem );

            //var el = document.createElement("span");
            //el.innerHTML = "test";
            //var div = document.getElementById("foo");
            

            //newElem.innerHTML = "sample text";
            //newElem.style.color = "red";
            //var el = document.createElement("td");
            //el.innerHTML = "sample text";
            //elem.parentElement.parentElement.appendChild( newElem );
            //insertAfter(elem.parentElement.parentElement, newElem).appendChild( el );

            if(elem.style.color === "red"){
                elem.style.color = "";
                document.getElementById('moredata').innerHTML = '';
                window.ivdDataTable.columns().search('').draw();
            } else {
                
                $.ajax({
                    method: "POST",
                    url: "/maklerdata",
                    data: { maklerId: param }
                })
                .done(function(res) {

                    //window.ivdDataTable.search(param).draw();
                    window.ivdDataTable.column(0).search(param).draw();

                    var s= document.getElementById('moredata');
                    // s.style.color = "red";
                    // s.innerHTML = '<h3>'+res.data+'</h3>';
                    s.innerHTML = res.data;

                    elem.style.color = "red";

                    //var trElem = document.createElement("tr"); 
                    //var tdElem = document.createElement("td");
                    //tdElem.innerHTML = res.data;
                    // tdElem.style.width = "100%";
                    // tdElem.innerHTML = "<div><p>I am text in a div. I am text in a div.</p></div>";
                    //insertAfter(elem.parentElement.parentElement, trElem).appendChild(tdElem);

                    if(focusElem !== undefined && focusElem.id !== elem.id){
                        focusElem.style.color = "";
                    }
                    focusElem = elem;
                
                    window.scrollTo(0, 0);

                });
            }

        }

        function insertAfter(referenceNode, newNode) {
            return referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
        }  

    </script>
{% endblock %}