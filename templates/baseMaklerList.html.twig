{% extends 'base.html.twig' %}

{% block head %}
    {{ parent() }}
    <!-- DataTables -->
    <link rel="stylesheet" href="{{ asset('bower_components/datatables.net-bs/css/dataTables.bootstrap.min.css') }}">
{% endblock %}

{% block footer %}
    {{ parent() }}
    <!-- DataTables -->
    <script src="{{ asset('bower_components/datatables.net/js/jquery.dataTables.min.js') }}"></script>
    <script src="{{ asset('bower_components/datatables.net-bs/js/dataTables.bootstrap.min.js') }}"></script>
    <script>

        $(document).ready(function() {

            var table = $('#example1').DataTable({
                data: {{dataSet|json_encode|raw}},
                stateSave: true
            });

            window.ivdDataTable = table;
            
            $('input[type="search"]').on('focus', function() {

                $('input[type="search"]').val($('input[type="search"]').val());
                window.ivdDataTable.columns().search('').draw(); //required after
                // table.search('').draw();

                if(focusElem !== undefined){
                    focusElem.style.color = "";
                    focusElem = undefined;
                    document.getElementById('moredata').innerHTML = '';
                }

            });

            $('#example1').on( 'page.dt', function () {
                //var info = table.page.info();
                //$('#pageInfo').html( 'Showing page: '+info.page+' of '+info.pages );
                if(focusElem !== undefined){
                    focusElem.style.color = "";
                    focusElem = undefined;
                    document.getElementById('moredata').innerHTML = '';
                }

            } );

        });

    </script>
{% endblock %}